## queries to run in mongo

use recommenderSystem;


db.recommendations.insert([{movieName : "The Godfather "},
{movieName : "The Godfather: Part II "},
{movieName : "The Dark Knight "},
{movieName : "Pulp Fiction "},
{movieName : "The Good, the Bad and the Ugly "},
{movieName : "Schindler's List "},
{movieName : "12 Angry Men "},
{movieName : "The Lord of the Rings: The Return of the King"},
{movieName : "Fight Club "},
{movieName : "The Lord of the Rings: The Fellowship of the Ring"},
{movieName : "Interstellar "},
{movieName : "Star Wars: Episode V - The Empire Strikes Back"},
{movieName : "Inception "},
{movieName : "Forrest Gump "},
{movieName : "One Flew Over the Cuckoo's Nest "},
{movieName : "The Lord of the Rings: The Two Towers "},
{movieName : "Goodfellas "},
{movieName : "The Matrix "},
{movieName : "Star Wars: Episode IV - A New Hope "},
{movieName : "Seven Samurai "},
{movieName : "City of God "},
{movieName : "Se7en "},
{movieName : "The Usual Suspects "},
{movieName : "The Silence of the Lambs "},
{movieName : "It's a Wonderful Life "},
{movieName : "Once Upon a Time in the West "},
{movieName : "Léon: The Professional "},
{movieName : "Life Is Beautiful "},
{movieName : "Casablanca "},
{movieName : "Raiders of the Lost Ark "},
{movieName : "American History X "},
{movieName : "Psycho "},
{movieName : "Saving Private Ryan "},
{movieName : "Rear Window "},
{movieName : "City Lights "},
{movieName : "Spirited Away "},
{movieName : "The Intouchables "},
{movieName : "ModTimes "},
{movieName : "Terminator 2: Judgment Day "},
{movieName : "Memento "},
{movieName : "Ο Πιανίστας "},
{movieName : "The Green Mile "},
{movieName : "Sunset Blvd. "},
{movieName : "Apocalypse Now "},
{movieName : "How I Learned to Stop"},
{movieName : "ying and Love the Bomb "},
{movieName : "The Departed "},
{movieName : "Gladiator "},
{movieName : "Back to the Future "},
{movieName : "Alien "},
{movieName : "The Prestige "},
{movieName : "The Dark Knight Rises "},
{movieName : "The Lives of Others "},
{movieName : "The Great Dictator "},
{movieName : "Django Unchained "},
{movieName : "The Lion King "},
{movieName : "The Shining "},
{movieName : "Cinema Paradiso "},
{movieName : "Paths of Glory "},
{movieName : "American Beauty "},
{movieName : "Boyhood "},
{movieName : "WALL·E "},
{movieName : "North by Northwest "},
{movieName : "Aliens "},
{movieName : "Citizen Kane "},
{movieName : "Amélie "},
{movieName : "Guardiof the Galaxy "},
{movieName : "Vertigo "},
{movieName : "Toy Story 3 "},
{movieName : "Das Boot "},
{movieName : "Oldboy "},
{movieName : "Princess Mononoke "},
{movieName : "Star Wars: Episode VI - The Return of the Jedi"},
{movieName : "Grave of the Fireflies "},
{movieName : "A Clockwork Orange "},
{movieName : "Taxi Driver "},
{movieName : "Κάποτε στην Αμερική "},
{movieName : "Reservoir Dogs "},
{movieName : "Double Indemnity "},
{movieName : "Braveheart "},
{movieName : "Requiem for a Dream "},
{movieName : "To Kill a Mockingbird "},
{movieName : "Gone Girl "},
{movieName : "Lawrence of Arabia "},
{movieName : "Eternal Sunshine of the Spotless Mind "},
{movieName : "Witness for the Prosecution "},
{movieName : "Full Metal Jacket "},
{movieName : "Singin' in the Rain "},
{movieName : "The Sting "},
{movieName : "Bicycle Thieves "},
{movieName : "Amadeus "},
{movieName : "Monty Python and the Holy Grail "},
{movieName : "Snatch. "},
{movieName : "L.A. Confidential "},
{movieName : "Rashomon "},
{movieName : "All About Eve "},
{movieName : "The Apartment "},
{movieName : "For a Few Dollars More "},
{movieName : "The Treasure of the Sierra Madre "},
{movieName : "Some Like It Hot "},
{movieName : "The Kid "},
{movieName : "Indiana Jones and the Last Crusade "},
{movieName : "Inglourious Basterds "},
{movieName : "2001: A Space Odyssey "},
{movieName : "The Third Man "},
{movieName : "Ένας Χωρισμός "},
{movieName : "Batman Begins "},
{movieName : "Yojimbo "},
{movieName : "Toy Story "},
{movieName : "Metropolis "},
{movieName : "Unforgiven "},
{movieName : "Raging Bull "},
{movieName : "Scarface "},
{movieName : "Chinatown "},
{movieName : "Up "},
{movieName : "Taare Zameen Par "},
{movieName : "Die Hard "},
{movieName : "Downfall "},
{movieName : "The Great Escape "},
{movieName : "Pan's Labyrinth "},
{movieName : "Mr. Smith Goes to Washington "},
{movieName : "On the Waterfront "},
{movieName : "Heat "},
{movieName : "The Hunt "},
{movieName : "Οι Τρεις Ηλίθιοι "},
{movieName : "The Bridge on the River Kwai "},
{movieName : "The Wolf of Wall Street "},
{movieName : "Good Will Hunting "},
{movieName : "The Seventh Seal "},
{movieName : "My Neighbor Totoro "},
{movieName : "The Elephant Man "},
{movieName : "Wild Strawberries "},
{movieName : "The Gold Rush "},
{movieName : "Ran "},
{movieName : "Blade Runner "},
{movieName : "Lock, Stock and Two Smoking Barrels "},
{movieName : "The General "},
{movieName : "Ikiru "},
{movieName : "Gran Torino "},
{movieName : "The Secret in Their Eyes "},
{movieName : "Casino "},
{movieName : "The Big Lebowski "},
{movieName : "Warrior "},
{movieName : "Rebecca "},
{movieName : "V for Vendetta "},
{movieName : "It Happened One Night "},
{movieName : "Howl's Moving Castle "},
{movieName : "The Deer Hunter "},
{movieName : "Cool Hand Luke "},
{movieName : "How to Train Your Dragon "},
{movieName : "Fargo "},
{movieName : "Rush "},
{movieName : "Trainspotting "},
{movieName : "Gone with the Wind "},
{movieName : "The Maltese Falcon "},
{movieName : "Into the Wild "},
{movieName : "Dil Chahta Hai "},
{movieName : "Rang De Basanti "},
{movieName : "Judgment at Nuremberg "},
{movieName : "A Beautiful Mind "},
{movieName : "The Sixth Sense "},
{movieName : "Hotel Rwanda "},
{movieName : "Dial M for Murder "},
{movieName : "The Thing "},
{movieName : "Butch Cassidy and the Sundance Kid "},
{movieName : "Finding Nemo "},
{movieName : "No Country for Old Men "},
{movieName : "12 Years a Slave "},
{movieName : "Kill Bill: Vol. 1 "},
{movieName : "The Wages of Fear "},
{movieName : "Platoon "},
{movieName : "Μαίρη και Μαξ "},
{movieName : "Life of Brian "},
{movieName : "X-Men: Days of Future Past "},
{movieName : "Annie Hall "},
{movieName : "Network "},
{movieName : "Sin City "},
{movieName : "Touch of Evil "},
{movieName : "Μέσα από τις φλόγες "},
{movieName : "The Grand Budapest Hotel "},
{movieName : "Diabolique "},
{movieName : "The Princess Bride "},
{movieName : "Stand by Me "},
{movieName : "There Will Be Blood "},
{movieName : "Ben-Hur "},
{movieName : "Amores Perros "},
{movieName : "The Wizard of Oz "},
{movieName : "Million Dollar Baby "},
{movieName : "The Avengers "},
{movieName : "Hachi: A Dog's Tale "},
{movieName : "The Grapes of Wrath "},
{movieName : "The 400 Blows "},
{movieName : "Εις το Όνομα του Πατρός "},
{movieName : "The Best Years of Our Lives "},
{movieName : "The Bourne Ultimatum "},
{movieName : "Persona "},
{movieName : "Donnie Darko "},
{movieName : "Gandhi "},
{movieName : "Strangers on a Train "},
{movieName : "8½ "},
{movieName : "Nausicaä of the Valley of the Wind "},
{movieName : "Jaws "},
{movieName : "Infernal Affairs "},
{movieName : "High Noon "},
{movieName : "Twelve Monkeys "},
{movieName : "The King's Speech "},
{movieName : "Notorious "},
{movieName : "The Terminator "},
{movieName : "Shutter Island "},
{movieName : "Stalker "},
{movieName : "Harry Potter and the Deathly Hallows: Part 2"},
{movieName : "Groundhog Day "},
{movieName : "Ip Man "},
{movieName : "Fanny and Alexander "},
{movieName : "Rocky "},
{movieName : "Before Sunrise "},
{movieName : "The Night of the Hunter "},
{movieName : "Dog Day Afternoon "},
{movieName : "Monsters, Inc. "},
{movieName : "Lagaan: Once Upon a Time in India "},
{movieName : "Pirates of the Caribbean: The Curse of the BPearl "},
{movieName : "La Haine "},
{movieName : "The Battle of Algiers "},
{movieName : "La Strada "},
{movieName : "Barry Lyndon "},
{movieName : "Memories of Murder "},
{movieName : "Who's Afraid of Virginia Woolf? "},
{movieName : "For a Fistful of Dollars "},
{movieName : "The Big Sleep "},
{movieName : "Castle in the Sky "},
{movieName : "The Truman Show "},
{movieName : "The Help "},
{movieName : "The Graduate "},
{movieName : "Roman Holiday "},
{movieName : "Her "},
{movieName : "Jurassic Park "},
{movieName : "The Hustler "},
{movieName : "The Celebration "},
{movieName : "Beauty and the Beast "},
{movieName : "In the Mood for Love "},
{movieName : "Rope "},
{movieName : "Stalag 17 "},
{movieName : "Slumdog Millionaire "},
{movieName : "Papillon "},
{movieName : "The Killing "},
{movieName : "Before Sunset "},
{movieName : "A Christmas Story "},
{movieName : "Prisoners "},
{movieName : "Three Colors: Red "}]);


db.recommendations.createIndex({movieName: "text"});		// For indexing on text field, this would only return results for important keyWords[Used this]
db.recommendations.createIndex({movieName: 1});				// Simple indexing for exact match


// To sort according to the score that is generated according to the exactness of the match
db.recommendations.find({$text: {$search:"City Godfather"}},{score: {$meta: "textScore"}, _id:0}).sort({score: {$meta:"textScore"}  })     

We can further use  this inside 
cast: {
        $elemMatch: {$regex: /City/, $regex: /GodFather/}}
    }]}
for a better match reducing false positives.
like:
db.recommendations.find({$and: [{$text: {$search:"City Godfather"}},{movieName: {$elemMatch: {$regex:/city/i, $regex:/godfather/i}}}]},{score: {$meta: "textScore"}, _id:0}).sort({score: {$meta:"textScore"}})